(this.webpackJsonpphonebook=this.webpackJsonpphonebook||[]).push([[0],{10:function(e,n,t){"use strict";t.r(n);var r=t(0),a=t.n(r),o=t(3),u=t.n(o),c=t(4),i=t(1),l=function(e){var n=e.onChange;return a.a.createElement("div",null,"Filter: ",a.a.createElement("input",{onChange:n("filterInput")}))},s=function(e){var n=e.onSubmit,t=e.onChange;return a.a.createElement("form",{onSubmit:n},a.a.createElement("div",null,"name: ",a.a.createElement("input",{onChange:t("newName")})),a.a.createElement("div",null,"number: ",a.a.createElement("input",{onChange:t("newNumber")})),a.a.createElement("div",null,a.a.createElement("button",{type:"submit"},"add")))},m=function(e){var n=e.person,t=e.deletePerson,r=n.name,o=n.number;return a.a.createElement("div",null,a.a.createElement("span",null,r,": ",o),a.a.createElement("button",{onClick:t},"Delete"))},f=function(e){var n=e.persons,t=e.filter,r=e.deletePerson;return a.a.createElement(a.a.Fragment,null,n.filter((function(e){return e.name.toLowerCase().startsWith(t)})).map((function(e){return a.a.createElement(m,{deletePerson:r(e.id,e.name),key:e.name,person:e})})))},d={color:"green",background:"lightgrey",fontSize:"20px",borderStyle:"solid",borderRadius:"5px",padding:"10px",marginBottom:"10px"},h=function(e){var n=e.message;return null===n?null:a.a.createElement("div",{style:d},n)},b="/api/persons",p=function(){return fetch(b).then((function(e){return e.json()}))},E=function(e){return fetch(b,{method:"POST",body:JSON.stringify(e),headers:{"Content-Type":"application/json"}}).then((function(e){return e.json()})).then((function(e){if(e.error)throw new Error(e.error);return e}))},g=function(e){return fetch("".concat(b,"/").concat(e),{method:"DELETE"}).catch((function(e){return e}))},v=function(e){return fetch("".concat(b,"/").concat(e.id),{method:"PUT",body:JSON.stringify(e),headers:{"Content-Type":"application/json"}}).then((function(e){if(e.status>=200&&e.status<300)return e.json();var n=new Error(e.statusText);throw n.status=e.status,n}))},w=function(){var e=Object(r.useState)([]),n=Object(i.a)(e,2),t=n[0],o=n[1],u=Object(r.useState)(""),m=Object(i.a)(u,2),d=m[0],b=m[1],w=Object(r.useState)(""),j=Object(i.a)(w,2),y=j[0],O=j[1],S=Object(r.useState)(""),C=Object(i.a)(S,2),k=C[0],N=C[1],P=Object(r.useState)(null),x=Object(i.a)(P,2),T=x[0],D=x[1],I={newName:b,newNumber:O,filterInput:N},J=function(e){return function(n){var t=n.target;I[e](t.value)}};return Object(r.useEffect)((function(){p().then(o).catch((function(e){return alert("couldn't get phonebook : ".concat(e))}))}),[]),a.a.createElement("div",null,a.a.createElement(h,{message:T}),a.a.createElement("h2",null,"Phonebook"),a.a.createElement(l,{onChange:J}),a.a.createElement("h3",null,"Add new: "),a.a.createElement(s,{onChange:J,onSubmit:function(e){e.preventDefault();var n=d.toLowerCase(),r=t.find((function(e){return e.name===n}));r&&window.confirm("".concat(d," is already added to phonebook, replace the old number with new one?"))?function(e){v(Object(c.a)({},e,{number:y})).then((function(e){var n=t.map((function(n){return n.id===e.id?e:n}));return o(n),e})).then((function(e){return D("".concat(e.name,"'s number has been updated"))})).catch((function(n){404===n.status&&D("Information of ".concat(e.name," has already been removed from the server"))}))}(r):E({name:n,number:y}).then((function(e){return o(t.concat(e)),e})).then((function(e){return D("".concat(e.name,"'s number has been added"))})).catch((function(e){return D(e.message)}))}}),a.a.createElement("h3",null,"Numbers"),a.a.createElement(f,{deletePerson:function(e,n){return function(){window.confirm("Are you sure you want to delete ".concat(n))&&g(e).then((function(n){return o(t.filter((function(n){return n.id!==e})))})).then((function(){return D("Deleted")}))}},persons:t,filter:k}))};u.a.render(a.a.createElement(w,null),document.getElementById("root"))},5:function(e,n,t){e.exports=t(10)}},[[5,1,2]]]);
//# sourceMappingURL=main.4c52e037.chunk.js.map